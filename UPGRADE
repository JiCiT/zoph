Zoph 0.8.3 to 0.8.4
###################
    * If you want to upgrade from 0.8.2, first follow the upgrade instructions from 0.8.2 to 0.8.3
    * If you want to upgrade from an older version, such as 0.8 or 0.8.0.x, first follow the upgrade instructions from 0.8 to 0.8.1, then the upgrade instructions from 0.8.1 to 0.8.2, then upgrade instructions from 0.8.2 to 0.8.3 and finally these instructions.
    * If you're upgrading from an older version, it is not necessary to install the "in between" versions first, you can just install the current version and follow the upgrade instructions below.

Copy the contents of the php directory, including all subdirs, into your webroot and copy the lang directory into the webroot as well. You should make a backup copy of config.inc.php to prevent overwriting it.

cp config.inc.php config.local.php
cp -a php/* /var/www/html/zoph
cp -a lang /var/www/html/zoph

Database changes
================

Because 0.8.4 is a version "in between" 0.8 and 0.9, you will need to edit the update script. You should comment out the changes that have already been applied to your system. Prepend the changes for 0.8.1 and/or 0.8.3 with a "#". There were no database changes in 0.8.2. Execute zoph-update-0.9.sql:

mysql -u zoph_admin -p zoph < sql/zoph_update-0.9.sql

Changes this script makes:

    * Remove the people_slots setting from the user preferences table
    * Add a hash to the photos table
    * Add a setting to control whether or not the user is allowed to use the sharing feature in the users table

Configuration changes
=====================
(see http://en.wikibooks.org/wiki/Zoph/Configuration for details):
New options
-----------
SHARE 
    Enable the possibility to share a photo by using a URL that can be used without logging in to Zoph. Once enabled, 
    you can determine per user whether or not this user is allowed to see these URLs. (0.8.4)
SHARE_SALT_FULL 
    When using the SHARE feature, Zoph uses a hash to identify a photo. Because you do not want people who have
    access to you full size photos (via Zoph or otherwise) to be able to generate these hashes, you should give
    Zoph a secret salt so only authorized users of your Zoph installation can generate them. This one is used
    for fullsize photos (0.8.4)
SHARE_SALT_FULL 
    When using the SHARE feature, Zoph uses a hash to identify a photo. Because you do not want people who have
    access to you full size photos (via Zoph or otherwise) to be able to generate these hashes, you should give
    Zoph a secret salt so only authorized users of your Zoph installation can generate them. This one is used
    for midsize photos (0.8.4)

Removed options
---------------
USE_IMAGE_SERVICE 
    The Image Service is now always on. If you were previously using define('USE_IMAGE_SERVICE', 0), you should
    move your images out of your webroot, and update IMAGE_DIR accordingly. (0.8.4)
WEB_IMAGE_DIR 
    This was only needed when USE_IMAGE_SERVICE was enabled. (0.8.4)
MAX_PEOPLE_SLOTS 
    The people slots feature, that allowed multiple 'add people' dropdowns on the edit photo and bulk edit
    photo pages has been replaced by a Javascript that automatically adds a new dropdown whenever a new person
    is added, allowing a virtually unlimited amount of people to be added in one edit. (0.8.4)

Changed options
---------------

MAGIC_FILE 
    Zoph would give an error when MAGIC_FILE was empty in Zoph 0.8.2 and 0.8.3 (it didn't exist in 0.8.1 and
    before). As of 0.8.4, the default and recommended value is empty, letting PHP use the built-in Magic file.
    Only if that does not work, you can set an alternative Magic file, according to your distribution's standards. (0.8.4) 


Zoph 0.8.2 to 0.8.3
    * You can use these instructions to go from 0.8.2.1 to 0.8.3
    * If you want to upgrade from 0.8.1, first follow the upgrade instructions from 0.8.1 to 0.8.2
    * If you want to upgrade from an older version, such as 0.8 or 0.8.0.x, first follow the upgrade instructions from 0.8 to 0.8.1, then the upgrade instructions from 0.8.1 to 0.8.2 and finally these instructions.
    * If you're upgrading from an older version, it is not necessary to install the "in between" versions first, you can just install the current version and follow the upgrade instructions below.

Copy the contents of the php directory, including all subdirs, into your webroot and copy the lang directory into the webroot as well. You should make a backup copy of config.inc.php to prevent overwriting it.

	cp config.inc.php config.local.php
	cp -a php/* /var/www/html/zoph
	cp -a lang /var/www/html/zoph

Database changes

Because 0.8.3 is a version "in between" 0.8 and 0.9, you will need to edit the update script. You should comment out the changes that have already been applied to your system. Prepend the changes for 0.8.1 with a "#". There were no database changes in 0.8.2. Execute zoph-update-0.9.sql:

	mysql -u zoph_admin -p zoph < sql/zoph_update-0.9.sql



Zoph 0.8.1 to 0.8.2

 * You can use these instructions to go from 0.8.1.x to 0.8.2
 * If you want to upgrade from 0.8 or 0.8.0.x, first follow the upgrade instructions from 0.8 to 0.8.1 [http://en.wikibooks.org/wiki/Zoph/Upgrading#Zoph_0.8_to_0.8.1]

As of 0.8.1, the bin and man directories in the Zoph tarball have been replaced by the cli directory. Also, zophExport.pl no longer exists and zophImport.pl has been replaced by zoph. If you had them installed, you should remove them from your system, they are no longer supported. Don't forget to remove the manpages (zophImport.pl.1.gz and zophExport.pl.1.gz) as well, they will usually be in /usr/share/man/man1.

Copy the contents of the php directory into your webroot and copy the lang directory into the webroot as well. You should make a backup copy of config.inc.php to prevent overwriting it.

	cp config.inc.php config.local.php
	cp -a php/* /var/www/html/zoph
	cp -a lang /var/www/html/zoph


Copy cli/zoph into /bin (or another directory in your $PATH).

	cp cli/zoph /bin

Copy zoph.1.gz into your man 1 directory (usually /usr/share/man/man1) and zoph.ini.5.gz into man 5 (usually /usr/share/man/man5).

	cp cli/zoph.1.gz /usr/share/man/man1
	cp cli/zoph.ini.5.gz /usr/share/man/man5

CONFIGURATION CHANGES

The most important configuration change is the replacement of .zophrc and a part of config.inc.php by zoph.ini. You can use zoph.ini.example in the cli dir as an example.

(see http://en.wikibooks.org/wiki/Zoph/Configuration for details)

Removed options
---------------

The following configuration options no longer exist, you should remove them from you config.inc.php:

	DB_HOST 
	    Moved to zoph.ini (0.8.2)
	DB_NAME 
	    Moved to zoph.ini (0.8.2)
	DB_USER 
	    Moved to zoph.ini (0.8.2)
	DB_PASS 
	    Moved to zoph.ini (0.8.2)
	CLIENT_WEB_IMPORT 
	    Replaced by UPLOAD (0.8.2)
	SERVER_WEB_IMPORT 
	    Replaced by IMPORT (0.8.2)
	DEFAULT_DESTINATION_PATH 
	    Due to introduction of IMPORT_DIR no longer necessary (0.8.2)
	SHOW_DESTINATION_PATH 
	    Due to introduction of IMPORT_DIR no longer necessary (0.8.2)
	REMOVE_ARCHIVE 
	    As of Zoph 0.8.2, Zoph always removes an archive after a successful
            decompress (0.8.2)
	IMPORT_MOVE 
	    Due to introduction of IMPORT_DIR, Zoph always moves files (0.8.2)
	IMPORT_UMASK 
	    Replaced by FILE_MODE (0.8.2)

New options
-----------

	CLI_USER 
	    User id that the CLI client uses to connect to Zoph. Must be 
            admin. Change this into '0' to let Zoph lookup the user from 
            the Unix user that is running Zoph. (0.8.2)
	IMPORT
	    Enable ('1') or disable ('0') webimport
	UPLOAD
	    Enable ('1') or disable ('0') uploading photos through the browser
	IMPORT_DIR
	    Directory, relative to IMAGE_DIR, that will store uploaded photos
            until they have been imported in Zoph.
	IMPORT_PARALLEL
	    Number of photos to resize concurrently.
	MAGIC_FILE
	    MIME Magic file. Zoph needs this to determine the file type of an 
            imported file.
	FILE_MODE
	    File permissions for files imported in Zoph.
	UNGZ_CMD
	    Command to be used to decompress .gz files.
	UNBZ_CMD
	    Command to be used to decompress .bzip files.

DATABASE CHANGES

No database changes need to be made for Zoph 0.8.2
