Zoph 0.3.2 -> 0.3.3 Upgrade
13 Dec 2002

If you are upgrading from a version previous to 0.3.2, please run the older
database updates first.

Updating the Database
---------------------

This update adds a new column to the prefs table.

Execute zoph-update-0.3.3.sql:

> mysql -u zoph_admin -p zoph < sql/zoph_update-0.3.3.sql

Updating the Templates
----------------------

Copy over php/* to the location of your installation (back up your old
config.inc.php first if you need to).  Make sure to also copy the php/lang
subdirectory as there are additions to the language files.  

There are a few new settings in config.inc.php.  The old WEB_IMPORT setting
was replaced with CLIENT_WEB_IMPORT and SERVER_WEB_IMPORT so that you can
enable/disable one or the other if you like.

This release also supports the uploading of zip and tar files.  Set the
UNZIP_CMD and/or UNTAR_CMD to enable this.  This feature extracts the images
to a temp folder before loading them.  The path to this folder is set by
EXTRACT_DIR.

Another new feature is the addition of a pref to let photo descriptions appear
under the thumbnails.  The MAX_THUMB_DESC config sets the maximum number of
characters to display.

A New Export Script
-------------------

You'll find a new perl script in this release, bin/zophExport.pl, which can
be used to create static html galleries of your photos.  See the manual for
more info.


-----------------------------------------------------------------------------
Zoph 0.3.1 -> 0.3.2 Upgrade
17 Oct 2002

If you are upgrading from a version previous to 0.3.1, please run the older
database updates first.

Updating the Database
---------------------

The only thing added in this update are four new color schemes.  You an skip
this if you don't think you will use them.

Execute the statements in zoph-update-0.3.2.sql:

> mysql -u zoph_admin -p zoph < sql/zoph_update-0.3.2.sql

Updating the Templates
----------------------

Copy over php/* to the location of your installation.  Make sure to also copy
the php/lang subdirectory as there are additions to the language files.  Also
included in this release are the htmlized docs, in the php/docs/ directory, if
you want them.

There are two new additions to config.inc.php: a VERSION variable and the
DEFAULT_SHOW_ALL setting.  The DEFAULT_SHOW_ALL setting makes all people
or places shown by default when you visit the people or places pages.  If
you don't have hundreds of records this is probably more convenient than
defaulting to 'a'.  It is enabled by default.

That's it for this release, but I'll mention one bug fix for a problem a few
users may have noticed: if you used zophImport.pl to load images that were
on a different filesystem than your images directory, everything would
apparently work but the original images would not be copied.  You might not
have even noticed the images were missing unless you tried to view the full
sized images in your browser.  This release fixes this problem and makes sure
other sorts of silent failure won't occur.


-----------------------------------------------------------------------------
Zoph 0.3 -> 0.3.1 Upgrade
30 Sep 2002

If you are upgrading from a version less than 0.3, please run the previous
database updates first.

Updating the Database
---------------------

Execute the statements in zoph-update-0.3.1.sql:

> mysql -u zoph_admin -p zoph < sql/zoph_update-0.3.1.sql

None of the database changes should create incompatibility with version 0.3.
You should update the db before updating the templates.

This database update attempts to delete some table accidentally included
in zoph.sql in version 0.3.  If you originally installed a prior version
you probably do not have these tables and the update will fail when the
"drop table" statements are reached.  That isn't a problem, the other
statements should have successfully executed first.

Updating the Templates
----------------------

Copy over php/* to the location of your installation.  Make sure to also copy
the php/lang subdirectory.

There are no changes to config.inc.php this release so you can backup your
version and then copy it over again.


-----------------------------------------------------------------------------
Zoph 0.2.1 -> 0.3 Upgrade
20 Sep 2002

If you are upgrading from Zoph 0.2, first update the database as described
in the "Zoph 0.2 -> 0.2.1 Upgrade" section below.

Updating the Database
---------------------

Execute the statements in zoph-update-0.3.sql:

> mysql -u zoph_admin -p zoph < sql/zoph_update-0.3.sql

None of the database changes should create incompatibility with version 0.2.1.
You should update the db before updating the templates.

Updating the Templates
----------------------

Copy over php/* to the location of your installation.  Make sure to also copy
the new php/lang and php/images subdirectories.

You may want to first backup your config.inc.php so you can copy your database
settings over to the new config file.

Section 3 of the INSTALL file, "Configuring the PHP templates", has been
updated to include information on the new config file settings.

The REQUIREMENTS document has info on what is need to use the new web importer.

The TUTORIAL has been updated to include information on using the web importer
and viewing Zoph in other languages.

The db.inc.php template isn't needed anymore (and wasn't in the last release
either, but it was accidentally included in the download).  You can delete
it if you like if it's still in your template directory.

If you are running PHP 4.2 and had to enable register_globals to get Zoph to
work, with Zoph 0.3 this is no longer required.  It is recommended that you
disable register_globals in php.ini now.  Also, to use the web importer you
may need to increase the max_execution_time in php.ini to something more
than the default of 30 seconds.

Configuration Changes
---------------------

In versions of Zoph prior to 0.3, thumbnails were generated as the same file
type as the original image (a jpeg image would have jpeg thumbnails, a gif
image gif thumbnails, etc).  As it may be desirable to instead have all
thumbnails be the same type (there probably is no need, for example, to
create uncompressed tiff thumbnails of tiff images), Zoph 0.3 allows you
to specify that all thumbnails should be of the same type.

If all your images are the same type or if you don't mind having different
sorts of thumbnails, you can skip this.

The default settings maintain compatibility with previous versions.  If you
would like to switch to a single thumbnail format, do the following:

In zophImport.pl

- set $mixed_thumbnails to 1
- set $thumb_extension to whatever you like (jpg, for example)

In config.inc.php set MIXED_THUMBNAILS and THUMB_EXTENSION to the same
values as zophImport.pl.

If you make this change and have previously generated thumbnails with an
extension different from THUMB_EXTENSION, you will need to regenerate
the old thumbnails.  A command like the following can take care of that
(this one finds gifs and makes jpgs):

> find images/ -name "thumb_*.gif" -o -name "mid_*.gif" | perl -nle '$old = $_; s/\.(\w+)$/.jpg/; $cmd = "convert $old $_"; print $cmd; system($cmd);'

You can then get rid of the old thumbnails.

Preferences Changes
-------------------

There are two new settings on the prefs page:

"Days past for recent photos links" sets the number of days used for the
recently taken/modified links on the home page.

"Language" set the language to display.  See the TUTORIAL for more info.

The PHP Importer
----------------

This version comes with a web based importer.  If you are planning to use
this feature you may need to install the following:

- GD 2.0
- PHP 4.2

See the first section of the REQUIREMENTS doc for more info.



-----------------------------------------------------------------------------

Zoph 0.2 -> 0.2.1 Upgrade
21 June 2002

If you already have Zoph 0.2 installed, upgrading is fairly simple.

Updating the Database
---------------------

Execute the statements in zoph-update-0.2.1.sql:

> mysql -u zoph_admin -p zoph < sql/zoph_update-0.2.1.sql

None of the database changes should create incompatibility with version 0.2.
You should update the db before updating the templates.

Updating the Templates
----------------------

Simply copy over php/* to the location of your installation.  You may want
to first backup your config.inc.php then copy it over.

If you do keep you previous config.inc.php, be aware of one addition to that
file.  Copy the lines defining the DEFAULT_USER from the new config.inc.php
to your file.

If you plan on using the new default (guest) user feature, read "Defining a
Default User" in the "Creating Users" section of the tutorial.
