<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
        <title>Zoph Documentation - Using_the_Webinterface</title>
        <link TYPE="text/css" REL="stylesheet" HREF="style.css">
    </head>
    <body>
    <p>
    All text is available under the terms of the <a href="http://en.wikibooks.org/wiki/GNU_Free_Documentation_License">GNU Free Documentation License</a>. For the latest version of this document, see <a href="http://en.wikibooks.org/wiki/Zoph">Wikibooks</a>.
    </p>
<h1 id="firstHeading" class="firstHeading">Zoph/Using the Webinterface</h1>
	<div id="bodyContent">
		
<p>This manual will describe how to start using Zoph. It assumes you have successfully installed all the components and are presented the logon screen when you visit <a href="http://localhost/zoph/logon.php" class="external free" rel="nofollow">http://localhost/zoph/logon.php</a>.</p>
<p>Prior to version 0.3.3 this document was referred to as the tutorial.</p>
<table id="toc" class="toc">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Logging_In_For_The_First_Time"><span class="tocnumber">1</span> <span class="toctext">Logging In For The First Time</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Creating_An_Album.2C_Category_and_Place"><span class="tocnumber">2</span> <span class="toctext">Creating An Album, Category and Place</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#The_Web_Based_Importer"><span class="tocnumber">3</span> <span class="toctext">The Web Based Importer</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Importing_Images"><span class="tocnumber">3.1</span> <span class="toctext">Importing Images</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Importing_a_Local_File"><span class="tocnumber">3.1.1</span> <span class="toctext">Importing a Local File</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Importing_Files_on_the_Server"><span class="tocnumber">3.1.2</span> <span class="toctext">Importing Files on the Server</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#File_And_Directory_Permissions"><span class="tocnumber">3.2</span> <span class="toctext">File And Directory Permissions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Viewing_Photos"><span class="tocnumber">4</span> <span class="toctext">Viewing Photos</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Finding_Photos"><span class="tocnumber">4.1</span> <span class="toctext">Finding Photos</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#The_Results_Page"><span class="tocnumber">4.2</span> <span class="toctext">The Results Page</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#The_Photo_Page"><span class="tocnumber">4.3</span> <span class="toctext">The Photo Page</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Slideshows"><span class="tocnumber">4.4</span> <span class="toctext">Slideshows</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#The_Search_Page"><span class="tocnumber">4.5</span> <span class="toctext">The Search Page</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Random_Photos"><span class="tocnumber">4.6</span> <span class="toctext">Random Photos</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Managing_Users.2C_Groups_.26_Restricting_Access"><span class="tocnumber">5</span> <span class="toctext">Managing Users, Groups &amp; Restricting Access</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Users"><span class="tocnumber">5.1</span> <span class="toctext">Users</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Creating_a_new_user_account"><span class="tocnumber">5.1.1</span> <span class="toctext">Creating a new user account</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Modifying_or_deleting_a_user_account"><span class="tocnumber">5.1.2</span> <span class="toctext">Modifying or deleting a user account</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Groups"><span class="tocnumber">5.2</span> <span class="toctext">Groups</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#Creating_a_group"><span class="tocnumber">5.2.1</span> <span class="toctext">Creating a group</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Modifying_a_group"><span class="tocnumber">5.2.2</span> <span class="toctext">Modifying a group</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="#Albums"><span class="tocnumber">5.3</span> <span class="toctext">Albums</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#Comments"><span class="tocnumber">6</span> <span class="toctext">Comments</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Watermarking"><span class="tocnumber">7</span> <span class="toctext">Watermarking</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Scenarios"><span class="tocnumber">8</span> <span class="toctext">Scenarios</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Access_levels"><span class="tocnumber">8.1</span> <span class="toctext">Access levels</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Watermarks"><span class="tocnumber">8.2</span> <span class="toctext">Watermarks</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#The_Image_Service"><span class="tocnumber">8.3</span> <span class="toctext">The Image Service</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#But_Don.27t_Trust_Me"><span class="tocnumber">8.4</span> <span class="toctext">But Don't Trust Me</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Defining_a_Default_User"><span class="tocnumber">8.5</span> <span class="toctext">Defining a Default User</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#Pages.2C_Pagesets_and_ZophCode"><span class="tocnumber">9</span> <span class="toctext">Pages, Pagesets and ZophCode</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#ZophCode"><span class="tocnumber">9.1</span> <span class="toctext">ZophCode</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Pages"><span class="tocnumber">9.2</span> <span class="toctext">Pages</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#PageSets"><span class="tocnumber">9.3</span> <span class="toctext">PageSets</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Assigning_a_PageSet_to_an_object"><span class="tocnumber">9.3.1</span> <span class="toctext">Assigning a PageSet to an object</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#Preferences"><span class="tocnumber">10</span> <span class="toctext">Preferences</span></a>
<ul>
<li class="toclevel-2 tocsection-37"><a href="#Breadcrumbs"><span class="tocnumber">10.1</span> <span class="toctext">Breadcrumbs</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Choosing_a_Language"><span class="tocnumber">10.2</span> <span class="toctext">Choosing a Language</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Other_Prefs"><span class="tocnumber">10.3</span> <span class="toctext">Other Prefs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-40"><a href="#Backing_Up_Your_Data"><span class="tocnumber">11</span> <span class="toctext">Backing Up Your Data</span></a></li>
<li class="toclevel-1 tocsection-41"><a href="#Integrating_Zoph"><span class="tocnumber">12</span> <span class="toctext">Integrating Zoph</span></a></li>
<li class="toclevel-1 tocsection-42"><a href="#Looking_Up_People"><span class="tocnumber">13</span> <span class="toctext">Looking Up People</span></a></li>
<li class="toclevel-1 tocsection-43"><a href="#Other_Lookups"><span class="tocnumber">14</span> <span class="toctext">Other Lookups</span></a></li>
<li class="toclevel-1 tocsection-44"><a href="#Incompatibilities"><span class="tocnumber">15</span> <span class="toctext">Incompatibilities</span></a>
<ul>
<li class="toclevel-2 tocsection-45"><a href="#Slideshows_2"><span class="tocnumber">15.1</span> <span class="toctext">Slideshows</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Emailing_a_Photo"><span class="tocnumber">15.2</span> <span class="toctext">Emailing a Photo</span></a></li>
</ul>
</li>
</ul>
</td>
</tr>
</table>

<h2> <span class="mw-headline" id="Logging_In_For_The_First_Time">Logging In For The First Time</span></h2>
<p>An admin user was created when you loaded the database. You should be able to login as 'admin' using the password 'admin'. You will be presented with Zoph's home page where you will be greeted as 'Unknown Person'. There will be a blank square where a random photo would normally appear.</p>
<p>The first thing you should do is change the admin's password:</p>
<ol>
<li>Click on the 'prefs' tab.</li>
<li>Click the 'change password' link.</li>
<li>Enter a new password and click 'submit'.</li>
</ol>
<p>Next, create a 'person' record for yourself:</p>
<ol>
<li>Click on the 'people' tab.</li>
<li>Click on the [ new ] link on the right.</li>
<li>Fill in your first name, last name and whatever other fields you wish.</li>
<li>Click the 'Insert' button.</li>
</ol>
<p>Now create a user for yourself:</p>
<ol>
<li>Click on the 'admin' tab.</li>
<li>Click on the 'users' icon.</li>
<li>Click on [ new ].</li>
<li>Pick a username and password.</li>
<li>Select yourself from the person pulldown.</li>
<li>Change your class to Admin.</li>
<li>Click the 'Insert' button.</li>
</ol>
<p>An admin has permission to do anything so you don't need to grant the specific 'browse' or 'view details' permissions, nor grant permissions to individual albums.</p>
<p>Now that you have created a user:</p>
<ol>
<li>Click on the 'logout' tab.</li>
<li>Login as your user.</li>
</ol>
<h2> <span class="mw-headline" id="Creating_An_Album.2C_Category_and_Place">Creating An Album, Category and Place</span></h2>
<p>Before importing some images we'll create an album to put them in. Note that you do not need to assign photos to an album if you don't want to.</p>
<p>To create an album:</p>
<ol>
<li>Click on the 'albums' tab.</li>
<li>Click on [ new ].</li>
<li>Pick an album name. I'm using "Zoph Tutorial" for this example.</li>
<li>Add an album description if you wish. This can be left blank.</li>
<li>Click the 'Insert' button.</li>
</ol>
<p>To create a category, click on the 'category' tab and do exactly as above. In creating this tutorial I took a picture of my hand so I created an "Appendages" category for it.</p>
<p>Both albums and categories are hierarchical in nature (each entry can have children entries as well). When you view photos in an album or category within Zoph you automatically see photos placed in that album or category's children as well.</p>
<p>To create a place:</p>
<ol>
<li>Click on the 'places' tab.</li>
<li>Click on [ new ].</li>
<li>Enter a title and city at minimum.</li>
<li>Click the 'Insert' button.</li>
</ol>
<h2> <span class="mw-headline" id="The_Web_Based_Importer">The Web Based Importer</span></h2>
<p>The web based importer is a new template in Zoph 0.3 that provides an alternative to the command line importer, zophImport.pl. This template does not yet contain all the functionality of zophImport.pl.</p>
<p>To use the importer, at least one of CLIENT_WEB_IMPORT and SERVER_WEB_IMPORT must be set to 1 in config.inc.php and you must be logged in as either an admin or a user that has been granted permission to import.</p>
<p>Enable CLIENT_WEB_IMPORT to upload files through the web-interface using a 'browse' button, and enable SERVER_WEB_IMPORT to import files through the web-interface for files that are already on the server. CLIENT_WEB_IMPORT and SERVER_WEB_IMPORT may be both activated.</p>
<p>If you are going to be importing directories of photos you will probably need to increase the size of max_execution_time in php.ini. The default is 30 seconds but you will probably need this to be a couple minutes or more, depending on how many images you import and how fast your computer is.</p>
<p>If you are running PHP &gt;= 4.2, the importer will try to read the EXIF headers of the images you are loading. Beware that if you specify a date and an EXIF date header is found, the EXIF date will overwrite your date field.</p>
<h3> <span class="mw-headline" id="Importing_Images">Importing Images</span></h3>
<h4> <span class="mw-headline" id="Importing_a_Local_File">Importing a Local File</span></h4>
<p>A local file means one on the same computer as the person using Zoph (and not, necessarily, the computer running Zoph). The image is uploaded using HTTP and is copied to the destination path. The file may be an image or a zip or tar archive. The images should not be placed in any directories within an archive.</p>
<p>To be able to upload archives you need to define the programs with which to do the extraction in config.inc.php. Example are given. Archives are extracted to a temporary directory created with the EXTRACT_DIR defined in config.inc.php. This directory should be writable by the webserver. The zip or tar files themselves are copies to the same location as the images and are not removed by Zoph.</p>
<h4> <span class="mw-headline" id="Importing_Files_on_the_Server">Importing Files on the Server</span></h4>
<p>The uploading step can be skipped for files already on the server running Zoph. This method also allows you to load a directory of images at once. Specify an absolute path in 'file/directory'.</p>
<p>If you are loading a directory of images, the fields you specify will apply to all of them.</p>
<h3> <span class="mw-headline" id="File_And_Directory_Permissions">File And Directory Permissions</span></h3>
<p>In order to copy images and create thumbnails Zoph needs write permission to the directory you are importing to. The simplest but least secure way to do this is to give the import directory 777 permissions. Alternatively, you could try creating a new group, put yourself and the webserver user in that group, and give the group write permission to the directory.</p>
<p>Files and directories are affected by the IMPORT_UMASK in config.inc.php. The default setting is 0 which leads to files with 777 permissions. Directories are created with DIR_MODE permissions, the default is also 777.</p>
<p>So by default everything created by the importer is open to everyone. Beware!</p>
<h2> <span class="mw-headline" id="Viewing_Photos">Viewing Photos</span></h2>
<p>Now that there are some photos in the database, I'll go over some features of the web interface. The UI is fairly self explanatory so you probably don't really have to read this section.</p>
<h3> <span class="mw-headline" id="Finding_Photos">Finding Photos</span></h3>
<p>There are numerous ways to find the photos you just entered, a few of which are:</p>
<ol>
<li>Browse to the album you created and click [ view photos ].</li>
<li>Browse to yourself in 'people' and click [ photos by ].</li>
<li>Browse to the place you took of photo and click [ photos at ].</li>
<li>Use the search form. Specifying no criteria will bring up all photos.</li>
<li>Use the 'photos' tab and you can browse every photo in Zoph.</li>
</ol>
<h3> <span class="mw-headline" id="The_Results_Page">The Results Page</span></h3>
<p>By default the results page will show thumbnails of up to 12 photos (you can change this from the 'prefs' page). On the prefs page you can also choose whether or not to display descriptions under the thumbnails.</p>
<p>From this page you can:</p>
<ol>
<li>Click on a thumbnail to go to the photo page.</li>
<li>Click on [ Prev ] or [ Next ], or use the pager, to page through the photos (if your results span more than one page).</li>
<li>Click on [ Slideshow ] to enter slideshow mode.</li>
<li>Reorder the photos by choosing a field from the pulldown.</li>
<li>Change the direction of ordering by clicking on one of the triangles. The white triangle/arrow represents the current direction.</li>
<li>Change the number of rows and columns displayed.</li>
</ol>
<h3> <span class="mw-headline" id="The_Photo_Page">The Photo Page</span></h3>
<p>Here you'll see a mid sized version of the photo plus all the information about the photo available.</p>
<p>From this page you can:</p>
<ol>
<li>Click the name of the file or the image itself to bring up the full sized photo.</li>
<li>Click on a person, place, album, category or date to take you to the corresponding pages.</li>
<li>Click on [ Prev ] or [ Next ] to move through the photos as they appeared on the results page.</li>
<li>Click on [ email ] to email the photo (if EMAIL_PHOTOS was set).</li>
<li>Click on [ lightbox ] to add the photo to your lightbox (if you have one)</li>
<li>Click on [ edit ] or [ delete ] (if you are an admin or have been given write permission on the album in which the photo appears).</li>
</ol>
<p>If you set the auto edit pref, you will automatically be presented with fields to edit the info about a photo whenever you click on a thumbnail. Clicking [ return ] takes you back to the regular view.</p>
<h3> <span class="mw-headline" id="Slideshows">Slideshows</span></h3>
<p>The slideshow mode (entered from the results page) will cycle through the current set of photos by refreshing the browser window. The interval between refreshes can be set on the 'prefs' page.</p>
<p>From the slideshow page you can:</p>
<ol>
<li>Click on [ pause ] to pause the slideshow.</li>
<li>Click on [ stop ] to return to the results page.</li>
<li>Click on [ open ] to view the current photo on the normal photo page.</li>
</ol>
<h3> <span class="mw-headline" id="The_Search_Page">The Search Page</span></h3>
<p>You can search for photos using multiple criteria on the search page. Note that when you select an album or category, all descendant albums or categories will also automatically be chosen.</p>
<p>By default all criteria are joined by "and". You can choose "or" instead from the pulldowns in the left most column. Since you can not specify groupings of the conditions, you might not get the results you want if you try to construct complex queries using different conjunctions.</p>
<p>Note that the album, category, location, person and photographer menus are pruned so that only those entries that actually appear in a photo that the user has access to are shown.</p>
<h3> <span class="mw-headline" id="Random_Photos">Random Photos</span></h3>
<p>The thumbnail that appears on the 'home' page is randomly selected. I tend to like this photo to be somewhat good so I created a setting on the 'prefs' page that lets you specify the minimum rating to be used when selecting a random photo.</p>
<p>If you want to create a never ending slideshow of random photos, you can do this by clicking the "randomly chosen photo" link on the home page. If you then click the [ Slideshow ] link on the results page a new random photo will be chosen for each slide. 5.7 Lightboxes</p>
<p>Lightboxes give someone a place to gather and share their favorite photos. In Zoph, lightboxes are simply albums. When editing a user, an admin can declare a certain album to be the lightbox for that user. The admin must grant the user permission to view the lightbox album as well.</p>
<p>IMPORTANT: Don't give a user write permission on their lightbox album. The user could then add any photo to their lightbox and be able to edit it.</p>
<p>Whenever the user views a photo they can click a 'lightbox' link which will add that photo to their lightbox. When a user is viewing their lightbox, each photo will have an 'x' below it. Clicking this will remove that photo from the lightbox.</p>
<p>Lightboxes allow users to gather photos of interest to them without requiring the ability to edit a photo to place it in an album.</p>
<p>Lightboxes are only activated for a user by specifying a lightbox album. The setup I used was to create a "Lightbox" album, under which I created separate albums for each user's lightbox (e.g. "Jason's Lightbox").</p>
<p>To share a lightbox an admin must grant permission to that album to other users.</p>
<h2> <span class="mw-headline" id="Managing_Users.2C_Groups_.26_Restricting_Access">Managing Users, Groups &amp; Restricting Access</span></h2>
<p>One of the features of Zoph is its system of access privileges. You have already created an admin class user for yourself. If you desire, you can create other users as well.</p>
<h3> <span class="mw-headline" id="Users">Users</span></h3>
<h4> <span class="mw-headline" id="Creating_a_new_user_account">Creating a new user account</span></h4>
<ol>
<li>Log on with an admin account.</li>
<li>Click "admin" in the menubar.</li>
<li>Click "users".</li>
<li>Click "new" in the right top of the screen.</li>
<li>Specify a user name (e.g. first initial + last name).</li>
<li>If the user is also represented by a "person" in your database (for example because he or she has taken photos or appears on them), specify a person, otherwise leave it on "Unknown Person".</li>
<li>Specify a password</li>
<li>Select a user class: an Admin can do anything at all. A User has restrictions. In that case, you can specify what a user can see, besides photos:
<ul>
<li>browse people: the user can view the 'people' page in which all the people stored in the database can be seen.</li>
<li>browse places: the user can view the 'places' page in which all the places stored in the database can be seen.</li>
<li>details of people: if "Yes" the user can see all information about any person. If "No" the user will only see a person's name.</li>
<li>details of places: if "Yes" the user can see all information about any place. If "No" the user will only see a place's title and city.</li>
<li>import: if "Yes" the user can import photos</li>
<li>download zipfiles: if "Yes", this user can download a set of photos (album, category, search result, etc.) as a zip file.</li>
<li>leave comments: if "Yes", this user can leave comments with photos.</li>
<li>rate photos: if "Yes", this user can rate photos.</li>
<li>rate photos multiple times: if "Yes", this user can rate the same photo more than once. Use this if you create an account that is used by multiple people. Each photo can be rated once per IP address.</li>
<li>lightbox: the user's lightbox album</li>
</ul>
</li>
<li>Click "insert"</li>
<li>Add the user to one or more groups. See <a href="#Groups">groups</a> how to do that.</li>
</ol>
<h4> <span class="mw-headline" id="Modifying_or_deleting_a_user_account">Modifying or deleting a user account</span></h4>
<ol>
<li>Log on with an admin account.</li>
<li>Click "admin" in the menubar.</li>
<li>Click "users".</li>
<li>Click the user you want to modify</li>
<li>Click "edit" or "delete"</li>
<li>Make the desired changes or confirm in case of a deletion.
<ul>
<li>For a description of the fields, see <a href="#Creating_a_new_user_account">creating a new user account</a>.</li>
</ul>
</li>
</ol>
<h3> <span class="mw-headline" id="Groups">Groups</span></h3>
<p>In order to give users access to photos, you must create one or more groups, you can then give accessrights to albums to those groups, you could for example create a group 'family', a group 'colleagues' and a group 'friends'. A user can be member of multiple groups and Zoph will combine the accessrights for all the groups.</p>
<h4> <span class="mw-headline" id="Creating_a_group">Creating a group</span></h4>
<ol>
<li>Log on with an admin account.</li>
<li>Click "admin" in the menubar.</li>
<li>Click "groups".</li>
<li>Enter a group name</li>
<li>If desired, enter a description.</li>
<li>Click "insert"</li>
<li>You will automatically be taken to the edit group screen. See <a href="#Modifying_a_group">Modifying a group</a> for an explanation.</li>
</ol>
<h4> <span class="mw-headline" id="Modifying_a_group">Modifying a group</span></h4>
<ol>
<li>Log on with an admin account.</li>
<li>Click "admin" in the menubar.</li>
<li>Click "groups".</li>
<li>Click on "display" next to the group name you wish to edit</li>
<li>Click on "edit"</li>
<li>You can change the group name or description and add or remove a member.
<ul>
<li>If you modify the group name, all the members will automatically change to the new group.</li>
<li>Select a user from the list to add them to the group</li>
<li>To remove a member from the group, tick the box in front of the username</li>
</ul>
</li>
<li>Click "update".
<ul>
<li>This screen has two "update" buttons, be sure to click the top one for these modifications.</li>
</ul>
</li>
<li>To add albums to the list this user can view, use the "grant access to all existing albums" or add a specific album.
<ul>
<li>For a more detailed explanation, see <a href="#Albums">albums</a>.</li>
</ul>
</li>
<li>Click "update".
<ul>
<li>This screen has two "update" buttons, be sure to click the bottom one for these modifications.</li>
<li>Be sure to modify either the top or the bottom half of this screen and not both.</li>
</ul>
</li>
</ol>
<h3> <span class="mw-headline" id="Albums">Albums</span></h3>
<p>For non-Admin users, permissions to view photos are granted on a per album basis. For each album you grant a group access to, you must specify:</p>
<ol>
<li>An access level</li>
<li>A Watermark level (if you have enabled watermarking in <tt>config.inc.php</tt>: see <a href="configuration.html#WATERMARKING" title="Zoph/Configuration">WATERMARKING</a>)</li>
<li>Whether that album will be writable</li>
</ol>
<p>Zoph determines whether a user has access to a photo checking two things:</p>
<ol>
<li>Is this photo in an album that at least one of the groups the user is member of has access to?</li>
<li>If so, is the group's access level for that album greater than or equal to the level of the photo?</li>
</ol>
<p>If both of these conditions are met, the user has access to the photo.</p>
<p>If a photo appears in more than one album, a user needs only to have permission on one of them to see the photo. If the user has access to multiple albums in which a photo is found, or the user has multiple groups that give access to the photo, the least restrictive (highest access level) permission is used.</p>
<p>The level of a photo (and therefore of access levels) can range from 0 to 10. The default access level is 5.</p>
<p>Zoph is designed so that these privileges should work transparently. It should appear to any user that they have access to all photos. There should be no reference to any album or photo (including photo counts) to which a user does not have access.</p>
<p>If an album is marked writable, members of the group may edit (but not delete) the photos that they have access to in that album.</p>
<p>If you want to grant a group access to all albums you can do this all at once and the access level and writable flag will apply to every album. This is handy if you want to let someone see everything but don't want them to change anything.</p>
<p>Note that when you create new albums you will have to grant permissions to any non-Admins before they will be able to see those album.</p>
<h2> <span class="mw-headline" id="Comments">Comments</span></h2>
<p>As of v0.6 users can leave comments, if <a href="configuration.html#ALLOW_COMMENTS" title="Zoph/Configuration">ALLOW_COMMENTS</a> is turned on.</p>
<p>As of v0.7.2 / v0.8 users can use (limited) markup in the comments, as well as smileys.</p>
<p>The following markup is supported: [u]underline[/u], [i]italics[/i] and [b]bold[/b], the various possible smileys are displayed with the comment input form: <a href="/w/index.php?title=File:ZophComment.png&amp;filetimestamp=20080315201450" class="image"><img alt="ZophComment.png" src="http://upload.wikimedia.org/wikibooks/en/1/1f/ZophComment.png" width="580" height="310" /></a></p>
<h2> <span class="mw-headline" id="Watermarking">Watermarking</span></h2>
<p>You can let Zoph superimpose a watermark over the fullsize picture. You can use this feature if you want your users to be able to look at the high quality pictures, but not use them for publication. To use this feature, the <a href="configuration.html#IMAGE_SERVICE" title="Zoph/Configuration">IMAGE_SERVICE</a> has to be enabled. Zoph will put a watermark on each photo that has a level higher than the watermark level.</p>
<h2> <span class="mw-headline" id="Scenarios">Scenarios</span></h2>
<h3> <span class="mw-headline" id="Access_levels">Access levels</span></h3>
<p>Say you create an account for your parents but you don't want them to see the photos in the "New Years Party" album. Simply don't grant them permission to that album.</p>
<p>However, say the photos in this album are mostly harmless, except for a few that you would like to keep hidden. In this case, change the level of those photos to 6 (or higher) and grant the user permission to the album with an access level of 5 (or less).</p>
<h3> <span class="mw-headline" id="Watermarks">Watermarks</span></h3>
<p>You have taken a couple of brilliant landscape images. You really want to show them to one of your regular customers, but you're affraid they will simply take your image and publish it, without paying for it. You put the photos in an album "Landscape" and set their level to 3.</p>
<p>After that, you give your customers account access level 5 and watermark level 2. They will now be able to watch the photo, but when they look at the fullsize image, a large copyright message will be superimposed over the photo. In this way, they will be able to judge the quality of the image, but it will be unusable to use in their productions.</p>
<p>After they have payed for the photo, you can put the image in an album that does allow them to see the photo without a watermark, change the level of the photo or change the watermark level. (keep in mind that the latter two will also influence other accounts or photos, respectively).</p>
<h3> <span class="mw-headline" id="The_Image_Service">The Image Service</span></h3>
<p>If you plan on having multiple users of Zoph and you are planning on hiding some pictures or albums from some users, you may want to turn on the image service in config.inc.php.</p>
<p>The simplest and fastest setup is to have the images served by the web server. However, this requires that the images are accessible to the web server. And if this is true, they are also accessible to any user. Even if the application never links to a photo that a user should not be allowed to see, that user could still view that photo (or any photo) by simply typing its url directly into their browser. Since the image names tend to follow a well defined pattern, it would not be too hard for someone to just guess image names and see what came up.</p>
<p>One solution to this problem is to have the application serve the images rather than the web server. This is what the image service does. If is is used, the IMAGE_DIR defined in config.inc.php should NOT be reachable by the web server. The image service will instead set the proper headers and read out the file itself.</p>
<p>Unfortunately, this makes Zoph slower and can make handling the images more cumbersome. If you don't care about people seeing all of your images, don't bother with the image service. To use watermarking, the image service must be enabled.</p>
<h3> <span class="mw-headline" id="But_Don.27t_Trust_Me">But Don't Trust Me</span></h3>
<p>Zoph has all these privilege mechanisms, but don't trust them too much to keep your secret photos hidden. It is beta software and hasn't been tested nearly enough for you to assume you'll be protected.</p>
<h3> <span class="mw-headline" id="Defining_a_Default_User">Defining a Default User</span></h3>
<p>Starting with Zoph 0.2.1 a default user can be defined. This user is automatically logged in when a person first opens Zoph in their browser.</p>
<p>If you use Zoph locally you may want to make yourself the default user so that you never have to bother logging in. You may also want to use this feature to create a guest account with limited permissions.</p>
<p>To create a guest user, first create a person record to associate with the user (this could just be first name Guest, last name User). Then create a guest user, grant that user whatever permissions you want and set the user's preferences. Whichever user is defined as the default user is unable to modify their preferences while they are the default.</p>
<p>You will now need to find the user_id of your guest user. The simplest way is probably to look at the url when you are viewing the users's record in zoph (user.php?user_id=3).</p>
<p>The default user is defined in config.inc.php:</p>
<pre>
// set to the id of a non admin user or to 0 to disable
// note that this is a user_id, not a person_id
define(DEFAULT_USER, 3);
</pre>
<p>That's it. Now when you hit /zoph/zoph.php for the first time you'll be logged in as the guest user (if you are already logged in as someone you'll first have to log out). You can also log out when you are the guest user to be able to log back in as someone else.</p>
<p>What if a guest hits logout and wants to get back in but doesn't know the guest account info? Hitting submit on the logon page without specifying a user name or password will log you in as the default user.</p>
<h2> <span class="mw-headline" id="Pages.2C_Pagesets_and_ZophCode">Pages, Pagesets and ZophCode</span></h2>
<p>By default, each album, category, place and person has a page that will show the basic data about this object. In some cases, you may want to customize this page. As of Zoph 0.7.2 it is possible to do so, using the ZophPages feature.</p>
<h3> <span class="mw-headline" id="ZophCode">ZophCode</span></h3>
<p>A ZophPage is written in ZophCode. ZophCode is very similar to bbCode or html and consist of tags in square brackets. Currently supported tags are:</p>
<table class="wikitable" style="text-align: left; border-collapse: collapse;" border="1|">
<caption>ZophCode</caption>
<tr>
<th style="text-align: left">Tag</th>
<th style="text-align: left">Meaning</th>
<th style="text-align: left">Example</th>
</tr>
<tr>
<td>[b]...[/b]</td>
<td>Bold</td>
<td>You can make text [b]bold[/b].</td>
</tr>
<tr>
<td>[i]...[/i]</td>
<td>Italics</td>
<td>To [i]emphasize[/i] a word...</td>
</tr>
<tr>
<td>[u]...[/u]</td>
<td>Underline</td>
<td>[u]Underline[/u] a word.</td>
</tr>
<tr>
<td>[h1]...[/h1]</td>
<td>Level 1 (chapter) header</td>
<td>[h1]My holiday[/h1]</td>
</tr>
<tr>
<td>[h2]...[/h2]</td>
<td>Level 2 (paragraph) header</td>
<td>[h2]Second day[/h2]</td>
</tr>
<tr>
<td>[h3]...[/h3]</td>
<td>Level 3 (sub-paragraph) header</td>
<td>[h3]Afternoon[/h3]</td>
</tr>
<tr>
<td>[color=&lt;color&gt;]...[/color]</td>
<td>Text colour.</td>
<td>Words in [color=blue]blue[/color] and [color=#ff0000]red[/color].</td>
</tr>
<tr>
<td>[font=&lt;font&gt;]...[/font]</td>
<td>Text font</td>
<td>Mixing [font=times]fonts[/font] can make your [font=courier]page[/font] look professional (or messy).</td>
</tr>
<tr>
<td>[br]</td>
<td>Line break</td>
<td>Best regards,[br]Jeroen</td>
</tr>
<tr>
<td>[background=&lt;color&gt;]...[/background]</td>
<td>Background colour</td>
<td>[background=blue]Blue background[/background]</td>
</tr>
<tr>
<td>[photo=&lt;id&gt;]...[/photo]</td>
<td>Link to a photo</td>
<td>[photo=123]See this photo![/photo]</td>
</tr>
<tr>
<td>[album=&lt;id&gt;]...[/album]</td>
<td>Link to an album</td>
<td>[album=123]See this album![/album]</td>
</tr>
<tr>
<td>[person=&lt;id&gt;]...[/person]</td>
<td>Link to a person</td>
<td>[person=123]See this person![/person]</td>
</tr>
<tr>
<td>[cat=&lt;id&gt;]...[/cat]</td>
<td>Link to a category</td>
<td>[cat=123]See this category![/cat]</td>
</tr>
<tr>
<td>[place=&lt;id&gt;]...[/place]</td>
<td>Link to a place</td>
<td>[place=123]See this place![/place]</td>
</tr>
<tr>
<td>[link=&lt;url&gt;]...[/link]</td>
<td>Link to a webpage</td>
<td>[link=http://www.zoph.org]Zoph[/link]</td>
</tr>
<tr>
<td>[thumb=&lt;id&gt;]</td>
<td>Thumbnail of a photo</td>
<td>[thumb=123]</td>
</tr>
<tr>
<td>[mid=&lt;id&gt;]</td>
<td>Mid-size image of a photo</td>
<td>[mid=123]</td>
</tr>
</table>
<p>It is possible to nest tags. For example:</p>
<pre>
[h1]Holiday in [b]Spain[b][/h1]
[i]more [u]emphasis[/u] by [b]combining[/b] tags[/i].
Click on this thumbnail to see the photo: [photo=123][thumb=123][/photo]
</pre>
<p>Just make sure you open and close the tags in the right order:</p>
<pre>
[b]This [i]will[/b] not[/i] work!
</pre>
<p>Finally, you can use smileys. See <a href="#Comments">#Comments</a> for an overview.</p>
<h3> <span class="mw-headline" id="Pages">Pages</span></h3>
<p>You can create a new page by going to the admin page and clicking on "Pages". Just type your text and tags and save. If you would like to spread the content over multiple pages, just save this one and create another page.</p>
<h3> <span class="mw-headline" id="PageSets">PageSets</span></h3>
<p>The next step is to combine 1 or more pages into a pageset. Keep in mind that if you have only one page, you still have to put it into a pageset. Create a pageset from the admin page and add the pages you would like to have in this pageset to it. You can also define the order in which the pages appear in the pageset by clicking on "move up" and "move down".</p>
<p>You also have to decide what you would like to do with the original page Zoph automatically creates for each album, category, place and person. You can choose to never display it, to display it on the first page, the last page or on each page. You can also choose whether you would like to see you own page first or the auto-generated. Keep in mind that if you choose to never display the original page, you could restrict navigation for your users. For example, if you have an album with a few sub-albums, your users will be unable to navigate to these subalbums unless you provide links in your page to these subalbums (and add new links every time you have added a new sub-album).</p>
<h4> <span class="mw-headline" id="Assigning_a_PageSet_to_an_object">Assigning a PageSet to an object</span></h4>
<p>The final step in enabling the ZophPages feature, is assigning the pageset to and album, category, place or person. You can do that by editing the specific object and choose the pageset.</p>
<h2> <span class="mw-headline" id="Preferences">Preferences</span></h2>
<p>A user can customize Zoph using the preferences page. Below are descriptions of a few of the prefs.</p>
<h3> <span class="mw-headline" id="Breadcrumbs">Breadcrumbs</span></h3>
<p>Between the tabs and the title bar you'll see a list of breadcrumbs by default. On the prefs page You can specify the number of breadcrumbs to show or you can choose to disable the breadcrumbs completely.</p>
<p>One note about breadcrumbs: clicking on the small x to the right of the breadcrumbs will clear the list of crumbs.</p>
<h3> <span class="mw-headline" id="Choosing_a_Language">Choosing a Language</span></h3>
<p>The default value is 'Browser Default'. This means that Zoph will try to present itself in the language you can specify in your browser's settings. If no translations are present for any of the languages in your browser's list, English will be displayed by default.</p>
<p>If you specify a language on the prefs page instead of 'Browser Default' your setting will override whatever you have your browser set to.</p>
<p>The language files are stored in php/lang. Creating a new translation involves creating a file in this directory with the language's two letter code in lowercase. Use one of the existing (non English) language files as an example.</p>
<h3> <span class="mw-headline" id="Other_Prefs">Other Prefs</span></h3>
<p>Here are descriptions of a few of the other prefs:</p>
<ul>
<li>days paste for recent photos links: the home page has links to view photos taken or modified in the past X days, this pref sets the number of days.</li>
<li>display camera info: if set to No, when viewing the details of a photo, fields like camera make and model, focal length, exposure, etc. are not displayed.</li>
<li>automatically edit photos: if set to Yes, when an admin or a user with write permission views the details of a photo, they are immediately taken to the edit screen. This is handy for editing one photo after another.</li>
<li>color scheme: the color scheme to use. Admins can click on "color scheme" to add, edit and delete color schemes.</li>
</ul>
<h2> <span class="mw-headline" id="Backing_Up_Your_Data">Backing Up Your Data</span></h2>
<p>It's always a good idea to back up you photos. Periodically sync them to another machine or burn them to a cd. Zoph should never delete your photos, when you delete something from the ui only the database record is removed.</p>
<p>You should also periodically export the database. After you spend hours inserting and updating photos into Zoph, take two seconds and do the following:</p>
<pre>
&gt; mysqldump -u zoph_admin -p zoph &gt; zoph-`date +%Y%m%d`.sql
</pre>
<h2> <span class="mw-headline" id="Integrating_Zoph">Integrating Zoph</span></h2>
<p>In this section I thought I'd mention a couple of tips if you are interested in trying to integrate Zoph with other parts of your website. This is still a work in progress.</p>
<h2> <span class="mw-headline" id="Looking_Up_People">Looking Up People</span></h2>
<p>Say you have a site that has its own person or user records and you would like to map between the two systems (you want to put a "photos of" link on the profile page of a user, for example). Though Zoph usually uses it's own person_id field, you can pass a name instead:</p>
<p><a href="http://www.zoph.org/demo/photos.php?person=Jason%20Geiger" class="external free" rel="nofollow">http://www.zoph.org/demo/photos.php?person=Jason%20Geiger</a></p>
<p>will show you photos of a person. You also can use "photographer":</p>
<p><a href="http://www.zoph.org/demo/photos.php?photographer=Jason%20Geiger" class="external free" rel="nofollow">http://www.zoph.org/demo/photos.php?photographer=Jason%20Geiger</a></p>
<p>Or instead of jumping to the photos page you can hit the person page:</p>
<p><a href="http://www.zoph.org/demo/person.php?person=Jason%20Geiger" class="external free" rel="nofollow">http://www.zoph.org/demo/person.php?person=Jason%20Geiger</a></p>
<h2> <span class="mw-headline" id="Other_Lookups">Other Lookups</span></h2>
<p>For albums, categories and locations these sorts of lookups don't exist at the moment. But they are fairly easy to incorporate if anyone is interested.</p>
<p>Of course it is easy to generate urls for the other photo fields (that don't require joins) like title or description. Just call photos.php?field=val. Any string that does not start with an underscore is assumed to be a field to search on.</p>
<h2> <span class="mw-headline" id="Incompatibilities">Incompatibilities</span></h2>
<p>While developing Zoph I've discovered a couple of oddities which I'll mention below. Problems that have solutions are likely to appear in the FAQ.</p>
<h3> <span class="mw-headline" id="Slideshows_2">Slideshows</span></h3>
<p>For some reason this feature does not work with IE 5 for Mac OS X. Every other photo is shown or the same photo is shown over and over.</p>
<p>The slideshow involves a simple refresh header so I'm not sure what the problem is. It works correctly with IE for Windows and OmniWeb for OSX.</p>
<p>Slideshows worked fine for me using Netscape 4.7 under Linux and Windows but I have been told of one problem using Netscape under Windows where once the slideshow is finished the photo results page that you are redirected to starts refreshing itself. Browsing to another page stops the problem. This may be slightly annoying but at least it doesn't prevent the slideshow from functioning.</p>
<h3> <span class="mw-headline" id="Emailing_a_Photo">Emailing a Photo</span></h3>
<p>Some servers or clients seem to have a problem with preserving or decoding the attachments generated by the Mime class. The often seems related to how lines are terminated.</p>
<p>I have currently set things up to terminate lines with \n (and not a \r\n). Here is the behavior I have observed:</p>
<ul>
<li>Worked: Postfix + Mutt, Exchange + Outlook, IMail Server + Outlook, Sun Internet Mail Server + Mutt</li>
<li>Didn't Work: InterMail + Eudora</li>
</ul>
<p>To play around with this, edit mail.php.</p>




</div>
</html>
